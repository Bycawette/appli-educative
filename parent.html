<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Espace parent ‚Äì Mes le√ßons</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      padding: 0 16px 40px;
      background: #f6f6fb;
      color: #222;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      text-align: center;
      margin-top: 0;
    }
    .block {
      background: #fff;
      border-radius: 12px;
      padding: 12px 16px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      margin-top: 20px;
    }
    .block h2 {
      margin-top: 0;
      font-size: 1.25rem;
    }
    .info {
      color: #444;
      font-size: 0.9rem;
      margin-top: -5px;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin: 6px 0;
    }
    a {
      color: #3344aa;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    ul {
      margin: 0;
      padding-left: 18px;
    }
  </style>
</head>
<body>

  <h1>Espace parent ‚Äì Mes le√ßons</h1>
  <p class="subtitle">
    Juste pour toi : voir ce que tu as comme le√ßons et ce que tu veux pr√©parer üìã
  </p>

  <!-- üßí ACC√àS DIRECT AUX MODES ENFANT -->
  <div class="block">
    <h2>üßí Acc√®s aux modes enfant</h2>
    <p class="info">Ouvre les entra√Ænements autonomes utilis√©s par ton enfant.</p>
    <ul>
      <li><a href="geo_auto.html">Mode enfant ‚Äì G√©ographie (jeu autonome)</a></li>
      <li><a href="tables_auto.html">Mode enfant ‚Äì Tables de multiplications</a></li>
    </ul>
  </div>
  <!-- üîö FIN ACC√àS ENFANT -->

  <!-- üìä STATISTIQUES ‚Äì TABLES -->
  <div class="block">
    <h2>üìä Statistiques ‚Äì Tables de multiplications</h2>
    <p class="info">R√©sum√© des entra√Ænements faits en mode enfant.</p>

    <ul>
      <li>Total de sessions : <strong id="math-total-sessions">0</strong></li>
      <li>Total de questions pos√©es : <strong id="math-total-questions">0</strong></li>
      <li>Total de bonnes r√©ponses : <strong id="math-total-correct">0</strong></li>
      <li>Derni√®re session : <span id="math-last-session">Aucune donn√©e</span></li>
    </ul>
  </div>
  <!-- üîö FIN STATS TABLES -->

  <!-- üìç G√âOGRAPHIE -->
  <div class="block">
    <h2>üìç G√©ographie</h2>
    <p class="info">Cocher ce que tu veux travailler avec ton enfant.</p>

    <label><input type="checkbox" id="map"> Cartes</label>
    <label><input type="checkbox" id="capitals"> Capitales</label>
    <label><input type="checkbox" id="provinces"> Provinces</label>
    <label><input type="checkbox" id="rivers"> Fleuves et rivi√®res</label>
  </div>

  <!-- ‚úèÔ∏è CONJUGAISON -->
  <div class="block">
    <h2>‚úèÔ∏è Conjugaison</h2>
    <p class="info">Cocher ce que tu veux travailler avec ton enfant.</p>

    <label><input type="checkbox" id="verbs-present"> Pr√©sent</label>
    <label><input type="checkbox" id="verbs-past"> Pass√©</label>
    <label><input type="checkbox" id="verbs-future"> Futur</label>
  </div>

  <!-- üìù ORTHOGRAPHE -->
  <div class="block">
    <h2>üìù Orthographe</h2>
    <p class="info">Cocher ce que tu veux travailler avec ton enfant.</p>

    <label><input type="checkbox" id="ortho-homophones"> Homophones</label>
    <label><input type="checkbox" id="ortho-dictation"> Dict√©e</label>
  </div>

  <script>
    /* === SAUVEGARDE DES CHOIX PARENT === */
    const STORAGE_KEY = "parent_choices";
    const checkboxes = document.querySelectorAll("input[type=checkbox]");

    function loadState() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (!saved) return;
      const state = JSON.parse(saved);
      checkboxes.forEach(cb => {
        if (state[cb.id] !== undefined) cb.checked = state[cb.id];
      });
    }

    function saveState() {
      const state = {};
      checkboxes.forEach(cb => {
        state[cb.id] = cb.checked;
      });
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    checkboxes.forEach(cb => cb.addEventListener("change", saveState));
    loadState();

    /* === üìä STATISTIQUES MATHS === */
    (function loadMathStats() {
      const raw = localStorage.getItem("math_tables_stats");
      if (!raw) return;

      try {
        const data = JSON.parse(raw);

        document.getElementById("math-total-sessions").textContent = data.totalSessions || 0;
        document.getElementById("math-total-questions").textContent = data.totalQuestions || 0;
        document.getElementById("math-total-correct").textContent = data.totalCorrect || 0;

        if (data.lastSession) {
          const d = new Date(data.lastSession.date || Date.now());
          const dateStr = d.toLocaleString("fr-BE", {
            year: "numeric", month: "2-digit", day: "2-digit",
            hour: "2-digit", minute: "2-digit"
          });
          const info = `${dateStr} ‚Äì ${data.lastSession.correct}/${data.lastSession.totalQuestions}`
            + (data.lastSession.stoppedEarly ? " (arr√™t anticip√©)" : "");
          document.getElementById("math-last-session").textContent = info;
        }
      } catch (e) {
        console.error("Erreur stats math :", e);
      }
    })();
  </script>

</body>
</html>
